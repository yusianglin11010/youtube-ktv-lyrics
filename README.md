# YouTube KTV 歌詞製作器

一個網頁版的卡拉OK歌詞時間軸製作與播放工具，支援 YouTube 影片同步顯示字幕動畫。

## 專案結構

```
yt-lyrics-maker/
└── yt-lyrics-html/
    ├── maker.html / maker.js / maker.css    # 歌詞時間軸製作器
    ├── player.html / player.js / player.css # 歌詞播放器
    └── fonts/                                # 30+ 多語言字型檔案
```

## 功能概覽

### 1. 歌詞製作器 (Maker)

**用途：** 為卡拉OK歌詞建立精確的逐字時間軸

**主要功能：**
- 透過 URL 載入 YouTube 影片
- 手動輸入歌詞（逐行輸入）
- 逐字記錄時間軸（毫秒級精度）
- 即時進度追蹤
- 匯出時間軸檔案（.txt 格式）
- 完成時顯示煙火慶祝動畫

**操作流程：**
1. 輸入 YouTube 網址 → 載入影片
2. 輸入歌詞（每行一句）
3. 系統智慧解析歌詞為單字/字元（支援中日韓英多語言）
4. 播放影片並按鍵記錄時間軸：
   - **空白鍵 / →** ：記錄當前字元時間
   - **←** ：重新開始當前行
   - **↑** ：回到上一行
   - **↓** ：跳到下一行
5. 完成後下載時間軸檔案

**智慧歌詞解析規則：**
- 支援手動標記：`[...]` 或 `/` 分隔符
- 自動識別：中文、日文（平假名/片假名）、韓文、英文、數字
- 智慧標點處理：依標點類型決定斷句位置

---

### 2. 歌詞播放器 (Player)

**用途：** 播放 YouTube 影片並顯示同步的 KTV 字幕動畫

**主要功能：**
- 上傳時間軸檔案（由製作器產生）
- 雙行同步顯示（奇數行在上、偶數行在下）
- 逐字高亮動畫（由左至右漸變填充）
- 30+ 種字型選擇（中日韓字型）
- 自訂選項：
  - 字型選擇器
  - 字體大小（20-80px）
  - 高亮顏色選擇
  - 陰影顏色選擇
  - 字幕時間偏移（-1秒 到 +1秒，±0.05秒步進）
- 全螢幕模式（含影片遮罩）
- 靜音段落顯示緩衝圓點 (●●●)

**操作流程：**
1. 上傳 .txt 時間軸檔案
2. 系統自動擷取 YouTube 網址並載入影片
3. 播放影片時自動同步顯示字幕動畫
4. 可即時調整字型、顏色、大小等設定

---

## 檔案格式

**時間軸檔案格式** (由製作器匯出)：
```
[影片標題]
https://www.youtube.com/watch?v=VIDEOID

Line 1 | Word 1 | 00:05:23 → 00:05:50 | 昨
Line 1 | Word 2 | 00:05:50 → 00:06:10 | 天
Line 1 | Word 3 | 00:06:10 → 00:06:45 | 的
...
```

時間格式：`MM:SS:MS`（分:秒:百分之一秒）

---

## 技術架構

| 技術 | 用途 |
|------|------|
| HTML5 | 頁面結構 |
| CSS3 | 樣式、動畫、漸層、響應式設計 |
| JavaScript (原生) | 所有業務邏輯，無框架依賴 |
| YouTube IFrame API | 影片嵌入與播放控制 |
| File API | .txt 檔案讀寫 |
| Web Fonts | 自訂字型 @font-face |

---

## 字型資源

**內建 30+ 種字型：**

| 類別 | 字型 |
|------|------|
| 繁體中文 | 粉圓體、辰宇落雁體、嘉市體、源流明體、源石黑體、源泉圓體、芫荽 |
| 日文 | Zen 角ゴシック、Zen 明朝、MPLUS1、Kaisei 系列、Kiwi Maru、Klee One |
| 韓文 | Noto Serif KR、Nanum Gothic、Nanum Brush Script、Gowun Batang 等 |
| 預設 | Noto Sans（備用字型） |

---

## 動畫技術

- 使用 `clip-path: inset(0 X% 0 0)` 實現由左至右的字元填充效果
- `requestAnimationFrame` 實現流暢的 20ms 更新間隔
- 雙層文字疊加（底層文字 + 高亮文字）實現平滑動畫

---

## 使用方式

### 製作歌詞時間軸
1. 開啟 `yt-lyrics-html/maker.html`
2. 貼上 YouTube 影片網址
3. 輸入歌詞內容
4. 播放影片並使用鍵盤記錄時間軸
5. 完成後點擊「匯出」下載檔案

### 播放 KTV 字幕
1. 開啟 `yt-lyrics-html/player.html`
2. 上傳時間軸檔案
3. 影片自動載入並開始播放
4. 依需求調整字型、顏色等設定
5. 點擊全螢幕享受 KTV 體驗

---

## 瀏覽器需求

- 支援 ES6 的現代瀏覽器
- YouTube IFrame API 支援
- File API (FileReader) 支援
- CSS3 動畫與變形支援
- Fullscreen API 支援

---

## 特色功能

- **智慧多語言解析**：自動識別中日韓英等語言的斷字規則
- **毫秒級精度**：精確記錄每個字元的開始與結束時間
- **即時預覽**：製作時可即時看到 KTV 風格的字幕顯示
- **高度自訂**：字型、顏色、大小、時間偏移皆可調整
- **無需後端**：純前端實作，開啟 HTML 即可使用
- **離線可用**：字型檔案本地載入，無需網路連線（影片除外）

---

## 授權

本專案僅供學習與個人使用。
